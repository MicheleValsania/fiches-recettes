export type Lang = "it" | "fr" | "en";

export const LANG_STORAGE_KEY = "fiches-recettes:lang";

const messages = {
  it: {
    "lang.it": "Italiano",
    "lang.fr": "Francese",
    "lang.en": "Inglese",
    "app.brandSub": "Schede tecniche pulite, pronte da stampare.",
    "app.newFiche": "Nuova fiche",
    "app.library": "Libreria fiches",
    "app.suppliers": "Fornitori",
    "app.products": "Prodotti",
    "app.exportJson": "Esporta JSON",
    "app.importJson": "Importa JSON",
    "app.print": "Stampa",
    "app.exportPdf": "Esporta PDF",
    "app.saveDb": "Salva nel DB",
    "app.mode": "Modalita",
    "app.mode.library": "Libreria fiches",
    "app.mode.suppliers": "Fornitori",
    "app.mode.products": "Prodotti",
    "app.mode.supplierDetail": "Listino fornitore",
    "app.searchTitle": "Cerca per titolo...",
    "app.exportAllJson": "Esporta tutte (JSON)",
    "app.exportAllPdfZip": "Esporta tutte (PDF ZIP)",
    "app.backToEditor": "Torna all'editor",
    "app.noFiches": "Nessuna fiche trovata. Salva una fiche per vederla qui.",
    "app.untitled": "Senza titolo",
    "app.updatedAt": "Aggiornata: {value}",
    "app.sectionLibraryTitle": "Libreria fiches",
    "app.sectionLibraryDesc": "Seleziona una fiche per aprirla nell'editor.",
    "app.sectionSuppliersTitle": "Fornitori",
    "app.sectionSuppliersDesc": "Gestisci l'elenco fornitori e apri il loro listino.",
    "app.searchSupplier": "Cerca fornitore...",
    "app.importCsv": "Importa CSV",
    "app.newSupplierPlaceholder": "Nuovo fornitore...",
    "app.addSupplier": "Aggiungi fornitore",
    "app.noSuppliers": "Nessun fornitore trovato.",
    "app.delete": "Elimina",
    "app.sectionProductsTitle": "Prodotti",
    "app.sectionProductsDesc": "Tutti i prodotti dei fornitori in ordine alfabetico.",
    "app.searchProductOrSupplier": "Cerca prodotto o fornitore...",
    "app.productHeaderName": "Prodotto",
    "app.productHeaderSupplier": "Fornitore",
    "app.productHeaderPrice": "Prezzo",
    "app.productHeaderUpdated": "Aggiornato",
    "app.noProducts": "Nessun prodotto trovato.",
    "app.sectionSupplierDetailTitle": "Listino fornitore",
    "app.supplierNamePlaceholder": "Nome fornitore",
    "app.saveName": "Salva nome",
    "app.searchProduct": "Cerca prodotto...",
    "app.backToSuppliers": "Torna ai fornitori",
    "app.productPlaceholder": "Prodotto...",
    "app.unitPricePlaceholder": "Prezzo unita",
    "app.unitLabel": "Unita",
    "app.addProduct": "Aggiungi prodotto",
    "app.noSupplierProducts": "Nessun prodotto nel listino.",
    "app.pricePlaceholder": "Prezzo",
    "app.save": "Salva",
    "app.deleteFicheAria": "Elimina fiche",
    "app.invalidJson": "File JSON non valido.",
    "status.savedDb": "Salvata nel DB.",
    "status.dbServerError": "Errore: server DB non raggiungibile.",
    "status.libraryLoadError": "Errore nel caricamento elenco.",
    "status.ficheLoaded": "Fiche caricata dal DB.",
    "status.ficheLoadError": "Impossibile caricare la fiche selezionata.",
    "status.deleteFicheError": "Errore eliminazione fiche.",
    "status.noFicheToExport": "Nessuna fiche da esportare.",
    "status.noFicheLoadable": "Errore esportazione: nessuna fiche caricabile.",
    "status.exportedAllJson": "Esportate {count} fiches in un unico file JSON.",
    "status.exportAllError": "Errore durante l'export di tutte le fiches.",
    "status.exportPdfProgress": "Generazione PDF {current}/{total}...",
    "status.exportPdfNone": "Errore esportazione PDF: nessun file generato.",
    "status.zipCreating": "Creazione archivio ZIP...",
    "status.exportedPdfZip": "Esportati {count} PDF in un unico ZIP.",
    "status.exportPdfZipError": "Errore durante l'export PDF ZIP.",
    "status.importRunning": "Import in corso...",
    "status.importNoValidRows": "Nessuna riga valida trovata nei CSV.",
    "status.importDone": "Import completato: {imported} prodotti ({suppliers} fornitori).{suffix}",
    "status.importError": "Errore durante l'import CSV.",
    "status.syncPricesDone": "Prezzi sincronizzati dal listino.",
    "status.syncPricesError": "Errore durante la sincronizzazione prezzi.",
    "status.suppliersLoadError": "Errore nel caricamento fornitori.",
    "status.productsLoadError": "Errore nel caricamento prodotti.",
    "status.supplierListLoadError": "Errore nel caricamento listino.",
    "status.supplierSaveError": "Errore nel salvataggio fornitore.",
    "status.supplierDeleted": "Fornitore eliminato.",
    "status.supplierDeleteError": "Errore eliminazione fornitore.",
    "status.productSaveError": "Errore nel salvataggio prodotto.",
    "status.productPriceUpdated": "Prezzo aggiornato nel listino.",
    "status.productUpdateError": "Errore aggiornamento prodotto.",
    "status.productDeleteError": "Errore eliminazione prodotto.",
    "status.supplierRenamed": "Fornitore rinominato.",
    "status.supplierRenameError": "Errore rinomina fornitore.",
    "status.productRenamed": "Prodotto rinominato.",
    "status.productRenameError": "Errore rinomina prodotto.",
    "status.autoSaveError": "Errore salvataggio automatico. Resta nell'editor per non perdere dati.",
    "confirm.deleteFiche": "Eliminare la fiche \"{title}\"?",
    "confirm.deleteSupplier": "Eliminare il fornitore \"{name}\" e tutto il suo listino?",
    "confirm.deleteProduct": "Eliminare questo prodotto dal listino?",
    "confirm.importSupplierSimilar":
      "[FORNITORI]\nE stato rilevato un fornitore simile gia esistente.\nEsistente: \"{existing}\"\nImport: \"{incoming}\"\nRighe importate per questo fornitore: {count}\n\nOK = importa nel fornitore esistente\nAnnulla = crea un nuovo fornitore",
    "confirm.importSupplierApplyAll":
      "[FORNITORI]\nVuoi applicare questa scelta a tutti i fornitori simili di questo import?\nOK = si, applica a tutti i fornitori\nAnnulla = chiedi caso per caso",
    "status.importSupplierUseExistingAll": "Fornitori simili: usa esistenti per tutto l'import.",
    "status.importSupplierCreateAll": "Fornitori simili: crea nuovi per tutto l'import.",
    "confirm.importProductSimilar":
      "[PRODOTTI]\nE stato rilevato un prodotto simile gia esistente per \"{supplier}\".\nEsistente: \"{existing}\"\nImport: \"{incoming}\"\nPrezzo import: {price} {unit}\n\nOK = aggiorna il prodotto esistente\nAnnulla = crea un nuovo prodotto",
    "confirm.importProductApplyAll":
      "[PRODOTTI]\nVuoi applicare questa scelta a tutti i prodotti simili di questo import?\nOK = si, applica a tutti i prodotti\nAnnulla = chiedi caso per caso",
    "status.importProductUpdateAll": "Prodotti simili: aggiorna esistenti per tutto l'import.",
    "status.importProductCreateAll": "Prodotti simili: crea nuovi per tutto l'import.",
    "form.editorTitle": "Editor fiche",
    "form.title": "Titolo",
    "form.titlePlaceholder": "Es: Risotto ai funghi",
    "form.category": "Categoria (opzionale)",
    "form.categoryPlaceholder": "Es: Primo, Dessert...",
    "form.portions": "Porzioni",
    "form.ingredients": "Ingredienti",
    "form.addIngredient": "+ Aggiungi ingrediente",
    "form.ingredientPlaceholder": "Ingrediente / Prodotto",
    "form.qtyPlaceholder": "Quantita",
    "form.notePlaceholder": "Note (opz.)",
    "form.remove": "Rimuovi",
    "form.moveUp": "Sposta su",
    "form.moveDown": "Sposta giu",
    "form.addBelow": "Aggiungi sotto",
    "form.supplierPlaceholder": "Fornitore",
    "form.unitPricePlaceholder": "Prezzo unita",
    "form.unitLabel": "Unita",
    "form.procedure": "Procedura",
    "form.addStep": "+ Aggiungi step",
    "form.equipment": "Attrezzatura (opz.)",
    "form.addEquipment": "+ Aggiungi attrezzo",
    "form.equipmentPlaceholder": "Es: planetaria, forno ventilato...",
    "form.allergens": "Allergeni (opz.)",
    "form.addAllergen": "+ Aggiungi allergene",
    "form.allergenPlaceholder": "Es: glutine, latte...",
    "form.notes": "Note (opz.)",
    "form.notesPlaceholder": "Note di servizio, conservazione, impiattamento...",
    "preview.ficheTitleFallback": "Fiche Technique",
    "preview.portions": "Porzioni: {value}",
    "preview.created": "Creato: {value}",
    "preview.updated": "Aggiornato: {value}",
    "preview.foodCostPerPortion": "Food cost per porzione",
    "preview.totalRecipe": "Totale ricetta: {value}",
    "preview.ingredients": "Ingredienti",
    "preview.noIngredients": "Nessun ingrediente.",
    "preview.colIngredient": "Ingrediente",
    "preview.colQty": "Quantita",
    "preview.colNotes": "Note",
    "preview.colSupplier": "Fornitore",
    "preview.colUnitPrice": "Prezzo unita",
    "preview.colCost": "Costo",
    "preview.procedure": "Procedura",
    "preview.noSteps": "Nessuno step.",
    "preview.equipment": "Attrezzatura",
    "preview.allergens": "Allergeni",
    "preview.notes": "Note",
  },
  fr: {
    "lang.it": "Italien",
    "lang.fr": "Francais",
    "lang.en": "Anglais",
    "app.brandSub": "Fiches techniques propres, pretes a imprimer.",
    "app.newFiche": "Nouvelle fiche",
    "app.library": "Bibliotheque fiches",
    "app.suppliers": "Fournisseurs",
    "app.products": "Produits",
    "app.exportJson": "Exporter JSON",
    "app.importJson": "Importer JSON",
    "app.print": "Imprimer",
    "app.exportPdf": "Exporter PDF",
    "app.saveDb": "Enregistrer",
    "app.mode": "Mode",
    "app.mode.library": "Bibliotheque fiches",
    "app.mode.suppliers": "Fournisseurs",
    "app.mode.products": "Produits",
    "app.mode.supplierDetail": "Tarif fournisseur",
    "app.pdfHint": "Conseil: pour un PDF avec texte selectionnable, utilisez Imprimer / Enregistrer en PDF.",
    "app.pdfHintRaster": "L'export 1 clic est utile mais rasterise souvent le contenu.",
    "app.searchTitle": "Rechercher par titre...",
    "app.exportAllJson": "Exporter toutes (JSON)",
    "app.exportAllPdfZip": "Exporter toutes (PDF ZIP)",
    "app.backToEditor": "Retour a l'editeur",
    "app.noFiches": "Aucune fiche trouvee. Enregistrez une fiche pour la voir ici.",
    "app.untitled": "Sans titre",
    "app.updatedAt": "Mise a jour: {value}",
    "app.sectionLibraryTitle": "Bibliotheque fiches",
    "app.sectionLibraryDesc": "Selectionnez une fiche pour l'ouvrir dans l'editeur.",
    "app.sectionSuppliersTitle": "Fournisseurs",
    "app.sectionSuppliersDesc": "Gerez la liste des fournisseurs et ouvrez leur tarif.",
    "app.searchSupplier": "Rechercher fournisseur...",
    "app.importCsv": "Importer CSV",
    "app.newSupplierPlaceholder": "Nouveau fournisseur...",
    "app.addSupplier": "Ajouter fournisseur",
    "app.noSuppliers": "Aucun fournisseur trouve.",
    "app.delete": "Supprimer",
    "app.sectionProductsTitle": "Produits",
    "app.sectionProductsDesc": "Tous les produits des fournisseurs par ordre alphabetique.",
    "app.searchProductOrSupplier": "Rechercher produit ou fournisseur...",
    "app.productHeaderName": "Produit",
    "app.productHeaderSupplier": "Fournisseur",
    "app.productHeaderPrice": "Prix",
    "app.productHeaderUpdated": "Mis a jour",
    "app.noProducts": "Aucun produit trouve.",
    "app.sectionSupplierDetailTitle": "Tarif fournisseur",
    "app.supplierNamePlaceholder": "Nom du fournisseur",
    "app.saveName": "Enregistrer nom",
    "app.searchProduct": "Rechercher produit...",
    "app.backToSuppliers": "Retour aux fournisseurs",
    "app.productPlaceholder": "Produit...",
    "app.unitPricePlaceholder": "Prix unitaire",
    "app.unitLabel": "Unite",
    "app.addProduct": "Ajouter produit",
    "app.noSupplierProducts": "Aucun produit dans le tarif.",
    "app.pricePlaceholder": "Prix",
    "app.save": "Enregistrer",
    "app.deleteFicheAria": "Supprimer fiche",
    "app.invalidJson": "Fichier JSON non valide.",
    "status.savedDb": "Enregistre en base.",
    "status.dbServerError": "Erreur: serveur base indisponible.",
    "status.libraryLoadError": "Erreur de chargement de la liste.",
    "status.ficheLoaded": "Fiche chargee depuis la base.",
    "status.ficheLoadError": "Impossible de charger la fiche selectionnee.",
    "status.deleteFicheError": "Erreur suppression fiche.",
    "status.noFicheToExport": "Aucune fiche a exporter.",
    "status.noFicheLoadable": "Erreur export: aucune fiche chargeable.",
    "status.exportedAllJson": "{count} fiches exportees dans un fichier JSON unique.",
    "status.exportAllError": "Erreur pendant l'export de toutes les fiches.",
    "status.exportPdfProgress": "Generation PDF {current}/{total}...",
    "status.exportPdfNone": "Erreur export PDF: aucun fichier genere.",
    "status.zipCreating": "Creation de l'archive ZIP...",
    "status.exportedPdfZip": "{count} PDF exportes dans un ZIP unique.",
    "status.exportPdfZipError": "Erreur pendant l'export PDF ZIP.",
    "status.importRunning": "Import en cours...",
    "status.importNoValidRows": "Aucune ligne valide trouvee dans les CSV.",
    "status.importDone": "Import termine: {imported} produits ({suppliers} fournisseurs).{suffix}",
    "status.importError": "Erreur pendant l'import CSV.",
    "status.syncPricesDone": "Prix synchronises depuis le tarif.",
    "status.syncPricesError": "Erreur pendant la synchronisation des prix.",
    "status.suppliersLoadError": "Erreur de chargement des fournisseurs.",
    "status.productsLoadError": "Erreur de chargement des produits.",
    "status.supplierListLoadError": "Erreur de chargement du tarif.",
    "status.supplierSaveError": "Erreur enregistrement fournisseur.",
    "status.supplierDeleted": "Fournisseur supprime.",
    "status.supplierDeleteError": "Erreur suppression fournisseur.",
    "status.productSaveError": "Erreur enregistrement produit.",
    "status.productPriceUpdated": "Prix mis a jour dans le tarif.",
    "status.productUpdateError": "Erreur mise a jour produit.",
    "status.productDeleteError": "Erreur suppression produit.",
    "status.supplierRenamed": "Fournisseur renomme.",
    "status.supplierRenameError": "Erreur renommage fournisseur.",
    "status.productRenamed": "Produit renomme.",
    "status.productRenameError": "Erreur renommage produit.",
    "status.autoSaveError": "Erreur sauvegarde automatique. Restez dans l'editeur pour eviter toute perte.",
    "confirm.deleteFiche": "Supprimer la fiche \"{title}\" ?",
    "confirm.deleteSupplier": "Supprimer le fournisseur \"{name}\" et tout son tarif ?",
    "confirm.deleteProduct": "Supprimer ce produit du tarif ?",
    "confirm.importSupplierSimilar":
      "[FOURNISSEURS]\nUn fournisseur similaire deja existant a ete detecte.\nExistant: \"{existing}\"\nImport: \"{incoming}\"\nLignes importees pour ce fournisseur: {count}\n\nOK = importer dans le fournisseur existant\nAnnuler = creer un nouveau fournisseur",
    "confirm.importSupplierApplyAll":
      "[FOURNISSEURS]\nAppliquer ce choix a tous les fournisseurs similaires de cet import ?\nOK = oui, appliquer a tous les fournisseurs\nAnnuler = demander au cas par cas",
    "status.importSupplierUseExistingAll": "Fournisseurs similaires: utiliser les existants pour tout l'import.",
    "status.importSupplierCreateAll": "Fournisseurs similaires: creer de nouveaux pour tout l'import.",
    "confirm.importProductSimilar":
      "[PRODUITS]\nUn produit similaire deja existant a ete detecte pour \"{supplier}\".\nExistant: \"{existing}\"\nImport: \"{incoming}\"\nPrix import: {price} {unit}\n\nOK = mettre a jour le produit existant\nAnnuler = creer un nouveau produit",
    "confirm.importProductApplyAll":
      "[PRODUITS]\nAppliquer ce choix a tous les produits similaires de cet import ?\nOK = oui, appliquer a tous les produits\nAnnuler = demander au cas par cas",
    "status.importProductUpdateAll": "Produits similaires: mettre a jour les existants pour tout l'import.",
    "status.importProductCreateAll": "Produits similaires: creer de nouveaux pour tout l'import.",
    "form.editorTitle": "Editeur fiche",
    "form.title": "Titre",
    "form.titlePlaceholder": "Ex: Risotto aux champignons",
    "form.category": "Categorie (optionnelle)",
    "form.categoryPlaceholder": "Ex: Entree, Dessert...",
    "form.portions": "Portions",
    "form.ingredients": "Ingredients",
    "form.addIngredient": "+ Ajouter ingredient",
    "form.ingredientPlaceholder": "Ingredient / Produit",
    "form.qtyPlaceholder": "Quantite",
    "form.notePlaceholder": "Notes (opt.)",
    "form.remove": "Supprimer",
    "form.moveUp": "Monter",
    "form.moveDown": "Descendre",
    "form.addBelow": "Ajouter dessous",
    "form.supplierPlaceholder": "Fournisseur",
    "form.unitPricePlaceholder": "Prix unitaire",
    "form.unitLabel": "Unite",
    "form.procedure": "Procedure",
    "form.addStep": "+ Ajouter etape",
    "form.equipment": "Materiel (opt.)",
    "form.addEquipment": "+ Ajouter materiel",
    "form.equipmentPlaceholder": "Ex: robot, four ventile...",
    "form.allergens": "Allergenes (opt.)",
    "form.addAllergen": "+ Ajouter allergene",
    "form.allergenPlaceholder": "Ex: gluten, lait...",
    "form.notes": "Notes (opt.)",
    "form.notesPlaceholder": "Notes de service, conservation, dressage...",
    "preview.ficheTitleFallback": "Fiche Technique",
    "preview.portions": "Portions: {value}",
    "preview.created": "Cree: {value}",
    "preview.updated": "Mis a jour: {value}",
    "preview.foodCostPerPortion": "Food cost par portion",
    "preview.totalRecipe": "Total recette: {value}",
    "preview.ingredients": "Ingredients",
    "preview.noIngredients": "Aucun ingredient.",
    "preview.colIngredient": "Ingredient",
    "preview.colQty": "Quantite",
    "preview.colNotes": "Notes",
    "preview.colSupplier": "Fournisseur",
    "preview.colUnitPrice": "Prix unite",
    "preview.colCost": "Cout",
    "preview.procedure": "Procedure",
    "preview.noSteps": "Aucune etape.",
    "preview.equipment": "Materiel",
    "preview.allergens": "Allergenes",
    "preview.notes": "Notes",
  },
  en: {
    "lang.it": "Italian",
    "lang.fr": "French",
    "lang.en": "English",
    "app.brandSub": "Clean technical sheets, ready to print.",
    "app.newFiche": "New fiche",
    "app.library": "Fiche library",
    "app.suppliers": "Suppliers",
    "app.products": "Products",
    "app.exportJson": "Export JSON",
    "app.importJson": "Import JSON",
    "app.print": "Print",
    "app.exportPdf": "Export PDF",
    "app.saveDb": "Save to DB",
    "app.mode": "Mode",
    "app.mode.library": "Fiche library",
    "app.mode.suppliers": "Suppliers",
    "app.mode.products": "Products",
    "app.mode.supplierDetail": "Supplier price list",
    "app.pdfHint": "Tip: for selectable text PDF use Print / Save as PDF.",
    "app.pdfHintRaster": "1-click export is handy but often rasterizes content.",
    "app.searchTitle": "Search by title...",
    "app.exportAllJson": "Export all (JSON)",
    "app.exportAllPdfZip": "Export all (PDF ZIP)",
    "app.backToEditor": "Back to editor",
    "app.noFiches": "No fiche found. Save one to see it here.",
    "app.untitled": "Untitled",
    "app.updatedAt": "Updated: {value}",
    "app.sectionLibraryTitle": "Fiche library",
    "app.sectionLibraryDesc": "Select a fiche to open it in the editor.",
    "app.sectionSuppliersTitle": "Suppliers",
    "app.sectionSuppliersDesc": "Manage suppliers and open their price list.",
    "app.searchSupplier": "Search supplier...",
    "app.importCsv": "Import CSV",
    "app.newSupplierPlaceholder": "New supplier...",
    "app.addSupplier": "Add supplier",
    "app.noSuppliers": "No supplier found.",
    "app.delete": "Delete",
    "app.sectionProductsTitle": "Products",
    "app.sectionProductsDesc": "All supplier products in alphabetical order.",
    "app.searchProductOrSupplier": "Search product or supplier...",
    "app.productHeaderName": "Product",
    "app.productHeaderSupplier": "Supplier",
    "app.productHeaderPrice": "Price",
    "app.productHeaderUpdated": "Updated",
    "app.noProducts": "No product found.",
    "app.sectionSupplierDetailTitle": "Supplier price list",
    "app.supplierNamePlaceholder": "Supplier name",
    "app.saveName": "Save name",
    "app.searchProduct": "Search product...",
    "app.backToSuppliers": "Back to suppliers",
    "app.productPlaceholder": "Product...",
    "app.unitPricePlaceholder": "Unit price",
    "app.unitLabel": "Unit",
    "app.addProduct": "Add product",
    "app.noSupplierProducts": "No product in price list.",
    "app.pricePlaceholder": "Price",
    "app.save": "Save",
    "app.deleteFicheAria": "Delete fiche",
    "app.invalidJson": "Invalid JSON file.",
    "status.savedDb": "Saved to DB.",
    "status.dbServerError": "Error: DB server unreachable.",
    "status.libraryLoadError": "Error loading list.",
    "status.ficheLoaded": "Fiche loaded from DB.",
    "status.ficheLoadError": "Cannot load selected fiche.",
    "status.deleteFicheError": "Error deleting fiche.",
    "status.noFicheToExport": "No fiche to export.",
    "status.noFicheLoadable": "Export error: no loadable fiche.",
    "status.exportedAllJson": "Exported {count} fiches in one JSON file.",
    "status.exportAllError": "Error while exporting all fiches.",
    "status.exportPdfProgress": "Generating PDF {current}/{total}...",
    "status.exportPdfNone": "PDF export error: no file generated.",
    "status.zipCreating": "Creating ZIP archive...",
    "status.exportedPdfZip": "Exported {count} PDFs in one ZIP.",
    "status.exportPdfZipError": "Error during PDF ZIP export.",
    "status.importRunning": "Import in progress...",
    "status.importNoValidRows": "No valid rows found in CSV files.",
    "status.importDone": "Import completed: {imported} products ({suppliers} suppliers).{suffix}",
    "status.importError": "Error during CSV import.",
    "status.syncPricesDone": "Prices synced from supplier list.",
    "status.syncPricesError": "Error while syncing prices.",
    "status.suppliersLoadError": "Error loading suppliers.",
    "status.productsLoadError": "Error loading products.",
    "status.supplierListLoadError": "Error loading supplier list.",
    "status.supplierSaveError": "Error saving supplier.",
    "status.supplierDeleted": "Supplier deleted.",
    "status.supplierDeleteError": "Error deleting supplier.",
    "status.productSaveError": "Error saving product.",
    "status.productPriceUpdated": "Price updated in supplier list.",
    "status.productUpdateError": "Error updating product.",
    "status.productDeleteError": "Error deleting product.",
    "status.supplierRenamed": "Supplier renamed.",
    "status.supplierRenameError": "Error renaming supplier.",
    "status.productRenamed": "Product renamed.",
    "status.productRenameError": "Error renaming product.",
    "status.autoSaveError": "Autosave error. Stay in editor to avoid data loss.",
    "confirm.deleteFiche": "Delete fiche \"{title}\"?",
    "confirm.deleteSupplier": "Delete supplier \"{name}\" and full price list?",
    "confirm.deleteProduct": "Delete this product from the price list?",
    "confirm.importSupplierSimilar":
      "[SUPPLIERS]\nA similar existing supplier was detected.\nExisting: \"{existing}\"\nImport: \"{incoming}\"\nImported rows for this supplier: {count}\n\nOK = import into existing supplier\nCancel = create a new supplier",
    "confirm.importSupplierApplyAll":
      "[SUPPLIERS]\nApply this choice to all similar suppliers in this import?\nOK = yes, apply to all suppliers\nCancel = ask case by case",
    "status.importSupplierUseExistingAll": "Similar suppliers: use existing for entire import.",
    "status.importSupplierCreateAll": "Similar suppliers: create new for entire import.",
    "confirm.importProductSimilar":
      "[PRODUCTS]\nA similar existing product was detected for \"{supplier}\".\nExisting: \"{existing}\"\nImport: \"{incoming}\"\nImport price: {price} {unit}\n\nOK = update existing product\nCancel = create a new product",
    "confirm.importProductApplyAll":
      "[PRODUCTS]\nApply this choice to all similar products in this import?\nOK = yes, apply to all products\nCancel = ask case by case",
    "status.importProductUpdateAll": "Similar products: update existing for entire import.",
    "status.importProductCreateAll": "Similar products: create new for entire import.",
    "form.editorTitle": "Fiche editor",
    "form.title": "Title",
    "form.titlePlaceholder": "Ex: Mushroom risotto",
    "form.category": "Category (optional)",
    "form.categoryPlaceholder": "Ex: Starter, Dessert...",
    "form.portions": "Portions",
    "form.ingredients": "Ingredients",
    "form.addIngredient": "+ Add ingredient",
    "form.ingredientPlaceholder": "Ingredient / Product",
    "form.qtyPlaceholder": "Quantity",
    "form.notePlaceholder": "Notes (opt.)",
    "form.remove": "Remove",
    "form.moveUp": "Move up",
    "form.moveDown": "Move down",
    "form.addBelow": "Add below",
    "form.supplierPlaceholder": "Supplier",
    "form.unitPricePlaceholder": "Unit price",
    "form.unitLabel": "Unit",
    "form.procedure": "Procedure",
    "form.addStep": "+ Add step",
    "form.equipment": "Equipment (opt.)",
    "form.addEquipment": "+ Add equipment",
    "form.equipmentPlaceholder": "Ex: mixer, convection oven...",
    "form.allergens": "Allergens (opt.)",
    "form.addAllergen": "+ Add allergen",
    "form.allergenPlaceholder": "Ex: gluten, milk...",
    "form.notes": "Notes (opt.)",
    "form.notesPlaceholder": "Service, storage, plating notes...",
    "preview.ficheTitleFallback": "Technical Sheet",
    "preview.portions": "Portions: {value}",
    "preview.created": "Created: {value}",
    "preview.updated": "Updated: {value}",
    "preview.foodCostPerPortion": "Food cost per portion",
    "preview.totalRecipe": "Recipe total: {value}",
    "preview.ingredients": "Ingredients",
    "preview.noIngredients": "No ingredient.",
    "preview.colIngredient": "Ingredient",
    "preview.colQty": "Quantity",
    "preview.colNotes": "Notes",
    "preview.colSupplier": "Supplier",
    "preview.colUnitPrice": "Unit price",
    "preview.colCost": "Cost",
    "preview.procedure": "Procedure",
    "preview.noSteps": "No step.",
    "preview.equipment": "Equipment",
    "preview.allergens": "Allergens",
    "preview.notes": "Notes",
  },
} as const;

type TranslationKey = keyof (typeof messages)["it"];
type TranslationVars = Record<string, string | number>;

export function getInitialLang(): Lang {
  const saved = localStorage.getItem(LANG_STORAGE_KEY);
  if (saved === "it" || saved === "fr" || saved === "en") return saved;
  const browser = navigator.language.toLowerCase();
  if (browser.startsWith("fr")) return "fr";
  if (browser.startsWith("en")) return "en";
  return "it";
}

export function t(lang: Lang, key: TranslationKey, vars?: TranslationVars): string {
  const template = messages[lang][key] ?? messages.it[key] ?? String(key);
  if (!vars) return template;
  return template.replace(/\{(\w+)\}/g, (_, token: string) => String(vars[token] ?? `{${token}}`));
}

export const localeByLang: Record<Lang, string> = {
  it: "it-IT",
  fr: "fr-FR",
  en: "en-US",
};
